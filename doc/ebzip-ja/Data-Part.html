<html lang="en">
<head>
<title>EB Library</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="EB Library">
<meta name="generator" content="makeinfo 4.5">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home">
</head>
<body>
<div class="node">
<p>
ノード:<a name="Data%20Part">Data Part</a>,
次:<a rel="next" accesskey="n" href="Index-Part.html#Index%20Part">Index Part</a>,
前:<a rel="previous" accesskey="p" href="Format-Overview.html#Format%20Overview">Format Overview</a>,
上:<a rel="up" accesskey="u" href="Compressed-File-Format.html#Compressed%20File%20Format">Compressed File Format</a>
<hr><br>
</div>

<h3 class="appendixsec">データ部</h3>

   <p>元のファイルは、次の行程で圧縮されます。

   <p>まず、<code>ebzip</code> は元のファイルを分割します。
個々の <dfn>スライス</dfn> (<dfn>slice</dfn>) は、末尾のものを除けば、同じ
大きさになっています。

<pre class="example">     +---------------+---------------+--   --+----------+
     |  スライス 1   |  スライス 2   |  ...  |スライス N|
     +---------------+---------------+--   --+----------+
                                                       EOF
     </pre>

<p>スライス・サイズは、圧縮レベルから決まります
(圧縮レベルについては see <a href="Compression-Level.html#Compression%20Level">圧縮レベル</a>)。

   <p><table><tr align="left"><td valign="top">圧縮レベル  </td><td valign="top">スライスの大きさ
<br></td></tr><tr align="left"><td valign="top">0           </td><td valign="top">2048 バイト
<br></td></tr><tr align="left"><td valign="top">1           </td><td valign="top">4096 バイト
<br></td></tr><tr align="left"><td valign="top">2           </td><td valign="top">8192 バイト
<br></td></tr><tr align="left"><td valign="top">3           </td><td valign="top">16384 バイト
<br></td></tr><tr align="left"><td valign="top">4           </td><td valign="top">32768 バイト
<br></td></tr><tr align="left"><td valign="top">5           </td><td valign="top">65536 バイト
   <br></td></tr></table>

<p>次に、末尾のスライスがスライス・サイズよりも短かった場合、
<code>ebzip</code> はスライス・サイズと同じになるまで伸ばし、伸ばした
部分に 0x00 を埋めます。

<pre class="example">                                                      伸した部分
     +---------------+---------------+--   --+---------+-----+
     |  スライス 1   |  スライス 2   |  ...  |  スライス N   |
     +---------------+---------------+--   --+---------+-----+
                                                             EOF
     </pre>

<p>最後に、<code>ebzip</code> は個々のスライスを、RFC 1951 に記されている
DEFLATE 圧縮データ形式で圧縮します。
おのおののスライスは、他のスライスとは独立して圧縮されます。
圧縮されたスライスのビット数が 8 の倍数でなければ、1 〜 7 ビットを圧
縮されたスライスの末尾に足し、8 の倍数になるようにします。
これにより、圧縮されたそれぞれのスライスはバイトの境界から開始されま
す。
足されたビットの内容は未定義ですが、このビットは決して使用されません。

<pre class="example">     +------------+----------+--   --+--------------+
     | 圧縮された |圧縮された|  ...  |  圧縮された  |
     | スライス 1 |スライス 2|  ...  |  スライス N  |
     +------------+----------+--   --+--------------+
     </pre>

<p>これが圧縮ファイル形式における <dfn>データ部</dfn> になり、圧縮されたスライ
スから構成されます。

   <p>末尾のスライスの伸ばした部分は、末尾のスライスの一部として圧縮され
ます。
<code>ebunzip</code> が末尾のスライスを復元するときは、スライスを伸長して
から伸ばした部分を取り除くという作業を行います。

   <p>圧縮したスライスの大きさが、スライス・サイズよりも大きいか等しいときは、
<code>ebzip</code> はそのスライスの圧縮データを廃棄します。
この場合、<code>ebzip</code> は元のデータをそのスライスの圧縮データとして代わ
りに記録します。

   <p>元のファイルが空だったときは、圧縮ファイルのデータ部はありません。

   </body></html>

