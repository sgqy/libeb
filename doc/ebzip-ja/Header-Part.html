<html lang="en">
<head>
<title>EB Library</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="EB Library">
<meta name="generator" content="makeinfo 4.5">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home">
</head>
<body>
<div class="node">
<p>
ノード:<a name="Header%20Part">Header Part</a>,
前:<a rel="previous" accesskey="p" href="Index-Part.html#Index%20Part">Index Part</a>,
上:<a rel="up" accesskey="u" href="Compressed-File-Format.html#Compressed%20File%20Format">Compressed File Format</a>
<hr><br>
</div>

<h3 class="appendixsec">ヘッダ部</h3>

   <p>ヘッダ部は 22 バイトからなります。
次のフィールドから構成されます。

<pre class="example">     +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
     | マジック ID  |*1| *2  |ファイルの大きさ | Adler-32  | 修正時刻  |
     +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
      0  1  2  3  4  5  6  7  8  9  10 11 12 13 14 15 16 17 18 19 20 21
     
     *1: zip モードと圧縮レベル
     *2: 予約領域
     </pre>

     <dl>
<dt><code>マジック ID (5 バイト)</code>
     <dd>0x45, 0x42, 0x5a, 0x69, 0x70 (ASCII 文字列で表すと <code>EBZip</code>) とい
う固定した値を持ちます。

     <br><dt><code>zip モード (MSB 側の 4 ビット)</code>
     <dd>圧縮モードを表します。
EB ライブラリバージョン 4.0beta3 では、1 (2 進数で 0001) だけが
規定されています。

     <br><dt><code>圧縮レベル (LSB 側の 4 ビット)</code>
     <dd>圧縮レベルを表します。

     <br><dt><code>予約領域 (2 バイト)</code>
     <dd>予約されていますが、使われていません。
0x0000 で埋められます。

     <br><dt><code>ファイルの大きさ (6 バイト)</code>
     <dd>元の (非圧縮時の) ファイルの大きさを記録しています。

     <br><dt><code>Adler-32 (4 バイト)</code>
     <dd>RFC 1950 に記されている Adler-32 というアルゴリズムを用いて計算した、
非圧縮データのチェックサムの値です。

     <br><dt><code>修正時刻 (4 バイト)</code>
     <dd>元のファイルの最終修正時刻です。
グリニッジ標準時の 1970 年 1 月 1 日 0 時 0 分 0 秒からの経過秒数で
表します。
</dl>

   <p><code>zip モード</code> と <code>圧縮レベル</code> は、両方ともヘッダの 5 バイト目
に入ります。
<code>zip モード</code> は、値の最も大きい部分を表すビット (most significant
bit) を含み、<code>圧縮レベル</code> は最も小さい部分を表すビット (least
significant bit) を含んでいます。
<code>zip モード</code> が 1 で、<code>圧縮レベル</code> が 2 なら、ヘッダの 5 バ
イト目は 0x12 になります。

<pre class="example">      MSB                         LSB
     +---+---+---+---+---+---+---+---+
     | 0   0   0   1   0   0   1   0 | = 0x12
     +---+---+---+---+---+---+---+---+
       (zip モード)  |  (圧縮レベル)
     </pre>

   <p>ヘッダ内での、複数バイトからなる数値はすべて、値の大きい方の部分
を表すバイト (most significant byte) が先に来た形で記録されます。


<div class="contents">
<h2>目次</h2>
<ul>
<li><a name="toc_Introduction" href="Introduction.html#Introduction">はじめに</a>
<li><a name="toc_Action%20and%20Command%20Name" href="Action-and-Command-Name.html#Action%20and%20Command%20Name">動作とコマンド名</a>
<li><a name="toc_Invoking%20ebzip" href="Invoking-ebzip.html#Invoking%20ebzip"><code>ebzip</code> の実行</a>
<li><a name="toc_Compression" href="Compression.html#Compression">圧縮</a>
<ul>
<li><a href="Compression-Example-1.html#Compression%20Example%201">圧縮の実行例 (1)</a>
<li><a href="Compression-Example-2.html#Compression%20Example%202">圧縮の実行例 (2)</a>
<li><a href="Compression-Level.html#Compression%20Level">圧縮レベル</a>
<li><a href="Test.html#Test">テスト</a>
<li><a href="Partial-Compression.html#Partial%20Compression">一部だけの圧縮</a>
<li><a href="Overwrite-Old-Files.html#Overwrite%20Old%20Files">古いファイルの上書き</a>
<li><a href="Compress-Compressed-Book.html#Compress%20Compressed%20Book">圧縮された書籍の圧縮</a>
</li></ul>
<li><a name="toc_Uncompression" href="Uncompression.html#Uncompression">伸長</a>
<ul>
<li><a href="Uncompression-Example.html#Uncompression%20Example">伸長の実行例</a>
<li><a href="Options-for-Uncompression.html#Options%20for%20Uncompression">伸長のオプション</a>
<li><a href="Uncompress-Compressed-Book.html#Uncompress%20Compressed%20Book">圧縮された書籍の伸長</a>
</li></ul>
<li><a name="toc_Information" href="Information.html#Information">情報出力</a>
<ul>
<li><a href="Information-Example.html#Information%20Example">情報出力の実行例</a>
<li><a href="Options-for-Information.html#Options%20for%20Information">情報出力のオプション</a>
</li></ul>
<li><a name="toc_Delete%20a%20Book" href="Delete-a-Book.html#Delete%20a%20Book">書籍の削除</a>
<li><a name="toc_Summary%20of%20Options" href="Summary-of-Options.html#Summary%20of%20Options"><code>ebzip</code> のオプション一覧</a>
<li><a name="toc_Comparision%20Result" href="Comparision-Result.html#Comparision%20Result">圧縮結果の比較</a>
<li><a name="toc_Compressed%20File%20Format" href="Compressed-File-Format.html#Compressed%20File%20Format">圧縮ファイルの形式</a>
<ul>
<li><a href="Format-Overview.html#Format%20Overview">圧縮ファイル形式の概要</a>
<li><a href="Data-Part.html#Data%20Part">データ部</a>
<li><a href="Index-Part.html#Index%20Part">インデックス部</a>
<li><a href="Header-Part.html#Header%20Part">ヘッダ部</a>
</li></ul>
</li></ul>
</div>

   </body></html>

