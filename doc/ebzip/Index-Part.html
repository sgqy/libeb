<html lang="en">
<head>
<title>ebzip</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name=description content="ebzip">
<meta name=generator content="makeinfo 4.2">
<link href="http://www.gnu.org/software/texinfo/" rel=generator-home>
</head>
<body>
<p>
Node:<a name="Index%20Part">Index Part</a>,
Next:<a rel=next accesskey=n href="Header-Part.html#Header%20Part">Header Part</a>,
Previous:<a rel=previous accesskey=p href="Data-Part.html#Data%20Part">Data Part</a>,
Up:<a rel=up accesskey=u href="Compressed-File-Format.html#Compressed%20File%20Format">Compressed File Format</a>
<hr><br>

<h3>Index Part</h3>

<p>At compression, <code>ebzip</code> records an <dfn>index</dfn> for each compressed
slice. 
An index represents a distance betweeen the beginning of the compressed
file to the beginning of a compressed slice. 
The unit of the distance is byte.

<br><pre>+---------+---------+--           --+---------+---------+
| index 1 | index 2 |  ...........  | index N |index END|
+---------+---------+--           --+---------+---------+
     |         |                        |         |
 +---+         +----+                   +------+  +-----------+
 V                  V                          V              V
+------------------+------------------+--   --+--------------+
|    compressed    |    compressed    |  ...  |  compressed  |
|      slice 1     |     slice 2      |  ...  |   slice N    |
+------------------+------------------+--   --+--------------+
</pre>

<p>Each index takes from 2 to 4 bytes, according with size of an original
file:

<p><table><tr align="left"><td valign="top">original file size             </td><td valign="top">index size
<br></td></tr><tr align="left"><td valign="top">0 ...      65535 bytes  </td><td valign="top">2 bytes
<br></td></tr><tr align="left"><td valign="top">65535 ...   16777215 bytes  </td><td valign="top">3 bytes
<br></td></tr><tr align="left"><td valign="top">16777216 ... 4294967295 bytes  </td><td valign="top">4 bytes
<br></td></tr></table>

<p>All multi-byte numbers in the indexes stored with the most significant
byte first. 
For example, 0x1234 is stored as follows. 
First byte holds 0x12, and second byte holds 0x34.

<br><pre>+---------+---------+
|0001 0010|0011 0100|
+---------+---------+
  (0x12)    (0x34)
</pre>

<p>The index part begins with the index for the compressed slice 1, and
the index for the compressed slice 2 follows it. 
The index for compressed slice N is followed by the index for END;
index for the next byte of the end of the compressed slice N. 
This index also represents the size of the compressed file.

<br><pre>+---------+---------+--       --+---------+---------+
| index 1 | index 2 |  .......  | index N |index END|
+---------+---------+--       --+---------+---------+
</pre>

<p>If its size is equal to the slice size, the data of the slice is not
compressed accutually.

<p>If an original file is empty, the index part has only one index. 
The index represents the size of the compressed file.

</body></html>

