<html lang="en">
<head>
<title>ebzip</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name=description content="ebzip">
<meta name=generator content="makeinfo 4.2">
<link href="http://www.gnu.org/software/texinfo/" rel=generator-home>
</head>
<body>
<p>
Node:<a name="Data%20Part">Data Part</a>,
Next:<a rel=next accesskey=n href="Index-Part.html#Index%20Part">Index Part</a>,
Previous:<a rel=previous accesskey=p href="Format-Overview.html#Format%20Overview">Format Overview</a>,
Up:<a rel=up accesskey=u href="Compressed-File-Format.html#Compressed%20File%20Format">Compressed File Format</a>
<hr><br>

<h3>Data Part</h3>

<p>An orignal file is compressed by the following processes.

<p>At first, <code>ebzip</code> slices an original file. 
Each <dfn>slice</dfn> except for the last slice (slice N in the following
picture) has the same size.

<br><pre>+---------------+---------------+--   --+----------+
|    slice 1    |    slice 2    |  ...  | slice N  |
+---------------+---------------+--   --+----------+
                                                   EOF
</pre>

<p>Slice size is determined by the compression level
(see <a href="Compression-Level.html#Compression%20Level">Compression Level</a>, about compression level):

<p><table><tr align="left"><td valign="top">compression level  </td><td valign="top">slice size
<br></td></tr><tr align="left"><td valign="top">0                  </td><td valign="top">2048 bytes
<br></td></tr><tr align="left"><td valign="top">1                  </td><td valign="top">4096 bytes
<br></td></tr><tr align="left"><td valign="top">2                  </td><td valign="top">8192 bytes
<br></td></tr><tr align="left"><td valign="top">3                  </td><td valign="top">16384 bytes
<br></td></tr><tr align="left"><td valign="top">4                  </td><td valign="top">32768 bytes
<br></td></tr><tr align="left"><td valign="top">5                  </td><td valign="top">65536 bytes
<br></td></tr></table>

<p>Second, if the last slice is shorter than the slice size, <code>ebzip</code>
extends the last slice to the slice size by padding bytes of 0x00.

<br><pre>                                                    pad
+---------------+---------------+--   --+---------+-----+
|    slice 1    |    slice 2    |  ...  |    slice N    |
+---------------+---------------+--   --+---------+-----+
                                                        EOF
</pre>

<p>Finally, <code>ebzip</code> compresses each slice into the DEFLATE compressed
data format, described in RFC 1951. 
A slice is compressed independently of another slice. 
Usually, each compressed slice occupies different size. 
If the number of bits of the compressed slice is not a multiple of 8,
1 to 7 bits are padded to the number of bits come to a multiple of 8
at the tail of the compressed slice. 
Thus, each compressed slice starts at byte boundary. 
The contents of the padded bits are undefined, but the padded bits are
never used.

<br><pre>+------------+----------+--   --+--------------+
| compressed |compressed|  ...  |  compressed  |
|   slice 1  | slice 2  |  ...  |   slice N    |
+------------+----------+--   --+--------------+
</pre>

<p>This is a <dfn>data part</dfn> of the compressed file format, which consists
of compressed slices.

<p>The padding in the last slice is compressed as a part of the slice. 
When <code>ebunzip</code> recovers the last slice, it uncompresses the slice
and then remove the padding.

<p>When a compressed slice is larger than or equal to slice size,
<code>ebzip</code> discards the compressed data of the slice. 
In this case, <code>ebzip</code> records original data as the compressed data
for that slice instead.

<p>If an original file is empty, the data part is not appered in a
compressed file.

</body></html>

