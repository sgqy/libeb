<html lang="en">
<head>
<title>EB Library</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="EB Library">
<meta name="generator" content="makeinfo 4.5">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home">
</head>
<body>
<div class="node">
<p>
ノード:<a name="BookList%20Functions">BookList Functions</a>,
次:<a rel="next" accesskey="n" href="BookList-Sample.html#BookList%20Sample">BookList Sample</a>,
前:<a rel="previous" accesskey="p" href="BookList-Data.html#BookList%20Data">BookList Data</a>,
上:<a rel="up" accesskey="u" href="Book-List-on-Server.html#Book%20List%20on%20Server">Book List on Server</a>
<hr><br>
</div>

<h3 class="section">関数の詳細</h3>

   <p>この節で説明している関数を使うには、次のようにヘッダファイルを読み込んで
下さい。

<pre class="example">     #include &lt;eb/booklist.h&gt;
     </pre>

<p>
<table width="100%">
<tr>
<td align="left">void <b>eb_initialize_booklist</b><i> </i>(<i>EB_BookList *</i><var>bl</var><i></i>)<i>
     </i></td>
<td align="right">機能</td>
</tr>
</table>
<table width="95%" align="center">
<tr><td>

     <p>関数 <code>eb_initialize_booklist()</code> は、<var>bl</var> の指す
<code>EB_BookList</code> オブジェクトを初期化します。
<code>EB_BookList</code> オブジェクトに対して EB ライブラリの他の関数を呼ぶ
前に、必ずそのオブジェクトを初期化しなくてはなりません。
初期化していないオブジェクトに対して、EB ライブラリの他の関数を呼んだ
場合の動作は未定義です。
また、すでに初期化したオブジェクトに対して、
再度 <code>eb_initialize_booklist()</code> を呼んではいけません。
呼んだ場合の動作は未定義です。
</td></tr>
</table>

<p>
<table width="100%">
<tr>
<td align="left">EB_Error_Code <b>eb_bind_booklist</b><i> </i>(<i>EB_BookList *</i><var>bl</var><i>, const char *</i><var>path</var><i></i>)<i>
     </i></td>
<td align="right">機能</td>
</tr>
</table>
<table width="95%" align="center">
<tr><td>

     <p>関数 <code>eb_bind_booklist()</code> は、<var>app</var> の指す
<code>EB_BookList</code> オブジェクトを、遠隔アクセス記述子 <var>path</var> で指定
された EBNET サーバに結び付けます。

     <p>オブジェクトがすでにサーバに結び付いていた場合、そのサーバとの結び付き
を解いてから、<var>path</var> にあるサーバに結び付けます。

     <p>成功すると、関数は <code>EB_SUCCESS</code> を返します。
失敗すると、オブジェクトをサーバとの結び付きを解かれた状態にして、原因
を示すエラーコードを返します。

     <p><var>path</var> は、<code>EB_MAX_PATH_LENGTH</code> バイトに収まていなくては
なりません。
これを超えると、<code>EB_ERR_TOO_LONG_FILE_NAME</code> を返します。
また、書籍名を指定していない遠隔アクセス記述子でなければなりません。
それ以外の形式だと、<code>EB_ERR_BAD_FILE_NAME</code> を返します。

     <p>使用している EB ライブラリのバイナリが、遠隔アクセスに非対応のもので
ある場合、<code>EB_ERR_EBNET_UNSUPPORTED</code> が返ります。
</td></tr>
</table>

<p>
<table width="100%">
<tr>
<td align="left">void <b>eb_finalize_booklist</b><i> </i>(<i>EB_BookList *</i><var>bl</var><i></i>)<i>
     </i></td>
<td align="right">機能</td>
</tr>
</table>
<table width="95%" align="center">
<tr><td>

     <p>関数 <code>eb_finalize_booklist()</code> は、<var>bl</var> が指す <code>EB_BookList</code>
オブジェクトの後始末を行います。

     <p>オブジェクトが割り当てて管理していたメモリはすべて解放され、
ファイルディスクリプタもすべて閉じられます。
オブジェクトが EBNET サーバと結び付いていた場合は、結び付きが解かれます。

     <p>後始末をしたオブジェクトに対して <code>eb_bind_booklist()</code> を呼ぶことで、
オブジェクトを再利用することができます。
</td></tr>
</table>

<p>
<table width="100%">
<tr>
<td align="left">int <b>eb_booklist_book_count</b><i> </i>(<i>EB_BookList *</i><var>bl</var><i></i>)<i>
     </i></td>
<td align="right">機能</td>
</tr>
</table>
<table width="95%" align="center">
<tr><td>

     <p>関数 <code>eb_booklist_book_count()</code> は、EBNET サーバがこのクライアント
に対してアクセスを許可している書籍および appendix データの数を取得します。

     <p>オブジェクト <var>bl</var> の指す <code>EB_BookList</code> オブジェクトは、
あらかじめ EBNET サーバに結びついている必要があります。
結びついていない場合は、<code>EB_ERR_UNBOUND_BOOKLIST</code> を返します。
</td></tr>
</table>

<p>
<table width="100%">
<tr>
<td align="left">EB_Error_Code <b>eb_booklist_book_name</b><i> </i>(<i>EB_BookList *</i><var>bl</var><i>, int </i><var>i</var><i>, char **</i><var>name</var><i></i>)<i>
     </i></td>
<td align="right">機能</td>
</tr>

<tr>
<td align="left">EB_Error_Code <b>eb_booklist_book_title</b><i> </i>(<i>EB_BookList *</i><var>bl</var><i>, int </i><var>i</var><i>, char **</i><var>title</var><i></i>)<i>
     </i></td>
<td align="right">機能</td>
</tr>
</table>
<table width="95%" align="center">
<tr><td>

     <p>関数 <code>eb_booklist_book_name()</code> は、EBNET サーバの書籍や
appendix データの名称を取得します。
ここで言う「名称」とは、遠隔アクセス識別子で指定する書籍名のことです。
つまり、<code>ebnet://localhost/dict</code> の <code>dict</code> の部分を指します。
同様に、関数 <code>eb_booklist_book_title()</code> は、書籍や appendix の題名
を取得します。

     <p>いずれの関数も、EBNET サーバ上の何番目の書籍もしくは appendix の情報を
取得するのかを、引数 <var>i</var> で指定します。
先頭は 1 番目ではなく 0 番目になります。

     <p>成功すると、関数は書籍の名称、題名へのポインタを *<var>name</var>, *<var>title</var>
に書き込み、<code>EB_SUCCESS</code> を返します。
なお、このポインタ値は オブジェクト <code>bl</code> が保持している文字列を指す
ようになっています。
<code>bl</code> に対して <code>eb_finalize_booklist()</code> を呼んでしまうと、この
文字列も参照不可能になってしまいますので、注意して下さい。

     <p>オブジェクト <var>bl</var> の指す <code>EB_BookList</code> オブジェクトは、
あらかじめ EBNET サーバに結びついている必要があります。
結びついていない場合は、<code>EB_ERR_UNBOUND_BOOKLIST</code> を返します。
また、<var>i</var> は 0 以上かつサーバが提供している書籍および appendix の
総数未満でなければなりません。
これ以外の値のときは、<code>EB_ERR_NO_SUCH_BOOK</code> が返ります。
</td></tr>
</table>

   </body></html>

