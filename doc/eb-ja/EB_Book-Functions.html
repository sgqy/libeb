<html lang="en">
<head>
<title>EB Library</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="EB Library">
<meta name="generator" content="makeinfo 4.5">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home">
</head>
<body>
<div class="node">
<p>
ノード:<a name="EB_Book%20Functions">EB_Book Functions</a>,
前:<a rel="previous" accesskey="p" href="EB_Book-Data-Types.html#EB_Book%20Data%20Types">EB_Book Data Types</a>,
上:<a rel="up" accesskey="u" href="EB_Book.html#EB_Book">EB_Book</a>
<hr><br>
</div>

<h3 class="section">関数の詳細</h3>

   <p>この節で説明している関数を使うには、次のようにヘッダファイルを読み込んで
下さい。

<pre class="example">     #include &lt;eb/eb.h&gt;
     </pre>

<p>
<table width="100%">
<tr>
<td align="left">void <b>eb_initialize_book</b><i> </i>(<i>EB_Book *</i><var>book</var><i></i>)<i>
     </i></td>
<td align="right">機能</td>
</tr>
</table>
<table width="95%" align="center">
<tr><td>

     <p>関数 <code>eb_initialize_book()</code> は、<var>book</var> の指す <code>EB_Book</code>
オブジェクトを初期化します。
<code>EB_Book</code> オブジェクトに対して EB ライブラリの他の関数を呼ぶ前に、
必ずそのオブジェクトを初期化しなくてはなりません。
初期化していないオブジェクトに対して、EB ライブラリの他の関数を呼んだ
場合の動作は未定義です。
また、すでに初期化したオブジェクトに対して、再度 <code>eb_initialize_book()</code>
を呼んではいけません。
呼んだ場合の動作は未定義です。
</td></tr>
</table>

<p>
<table width="100%">
<tr>
<td align="left">EB_Error_Code <b>eb_bind</b><i> </i>(<i>EB_Book *</i><var>book</var><i>, const char *</i><var>path</var><i></i>)<i>
     </i></td>
<td align="right">機能</td>
</tr>
</table>
<table width="95%" align="center">
<tr><td>

     <p>関数 <code>eb_bind()</code> は、<var>book</var> の指す <code>EB_Book</code> オブジェクト
を、パス <var>path</var> にある CD-ROM 書籍に結び付けます。
パスには、書籍のトップディレクトリか遠隔アクセス識別子を指定します。
書籍のトップディレクトリとは、<code>catalog</code> あるいは <code>catalogs</code>
ファイルの存在するディレクトリを指します。

     <p>オブジェクトがすでに書籍に結び付いていた場合、その書籍との結び付きを
解いてから、<var>path</var> にある書籍に結び付けます。

     <p>成功すると、関数は <code>EB_SUCCESS</code> を返します。
このとき、副本は未選択の状態になります。
失敗すると、オブジェクトを書籍との結び付きを解かれた状態にして、原因
を示すエラーコードを返します。

     <p><var>path</var> は、<code>EB_MAX_PATH_LENGTH</code> バイトに収まていなくては
なりません。
さらに、<var>path</var> が相対パスのときは、絶対パスに変換した結果がこの長さ
に収まっていなくてはなりません。
これを超えると、<code>EB_ERR_TOO_LONG_FILE_NAME</code> を返します。
</td></tr>
</table>

<p>
<table width="100%">
<tr>
<td align="left">void <b>eb_finalize_book</b><i> </i>(<i>EB_Book *</i><var>book</var><i></i>)<i>
     </i></td>
<td align="right">機能</td>
</tr>
</table>
<table width="95%" align="center">
<tr><td>

     <p>関数 <code>eb_finalize_book()</code> は、<var>book</var> が指す <code>EB_Book</code>
オブジェクトの後始末を行います。

     <p>オブジェクトが割り当てて管理していたメモリはすべて解放され、
ファイルディスクリプタもすべて閉じられます。
オブジェクトが書籍と結び付いていた場合は、結び付きが解かれます。

     <p>後始末をしたオブジェクトに対して <code>eb_bind()</code> を呼ぶことで、
オブジェクトを再利用することができます。
</td></tr>
</table>

<p>
<table width="100%">
<tr>
<td align="left">int <b>eb_is_bound</b><i> </i>(<i>EB_Book *</i><var>book</var><i></i>)<i>
     </i></td>
<td align="right">機能</td>
</tr>
</table>
<table width="95%" align="center">
<tr><td>

     <p>関数 <code>eb_is_bound()</code> は、<var>book</var> が書籍に結び付いているかどうか
を調べます。
結び付いていれば 1 を返し、そうでなければ 0 を返します。
</td></tr>
</table>

<p>
<table width="100%">
<tr>
<td align="left">EB_Error_Code <b>eb_path</b><i> </i>(<i>EB_Book *</i><var>book</var><i> const char *</i><var>path</var><i></i>)<i>
     </i></td>
<td align="right">機能</td>
</tr>
</table>
<table width="95%" align="center">
<tr><td>

     <p>関数 <code>eb_path()</code> は、<var>book</var> に結び付いている書籍のパス
もしくは遠隔アクセス識別子を、<var>path</var> の指す領域に書き込みます。

     <p>成功すると、関数は <code>EB_SUCCESS</code> を返します。
失敗すると、<var>path</var> の指す領域に空文字列を書き込み、原因を示す
エラーコードを返します。

     <p><var>book</var> は、あらかじめ書籍に結び付いている必要があります。
結びついていない場合は、<code>EB_ERR_UNBOUND_BOOK</code> を返します。

     <p><var>path</var> に書き込むパス名のバイト数は、最長で <code>EB_MAX_PATH_LENGTH</code>
になります。
この長さは、末尾のナル文字を含みません。
関数が返すパスは正規化された形になっているので、<code>eb_bind()</code> に
渡したときのものと同じとは限りません。
たとえば、相対パスだった場合は、絶対パスに変換されます。
</td></tr>
</table>

<p>
<table width="100%">
<tr>
<td align="left">EB_Error_Code <b>eb_disc_type</b><i> </i>(<i>EB_Book *</i><var>book</var><i>, EB_Disc_Code *</i><var>disc_code</var><i></i>)<i>
     </i></td>
<td align="right">機能</td>
</tr>
</table>
<table width="95%" align="center">
<tr><td>

     <p>関数 <code>eb_disc_type()</code> は、<var>book</var> のディスクの形式を
<var>disc_code</var> の指す領域に書き込みます。
書き込むディスクの形式の値は、<code>EB_Disc_Code</code> 型
(see <a href="EB_Book-Data-Types.html#EB_Book%20Data%20Types">[CD-ROM 書籍と <code>EB_Book</code> オブジェクト] データ型の詳細</a>)
のいずれかの定数値です。

     <p>成功すると、関数は <code>EB_SUCCESS</code> を返します。
失敗すると、<var>disc_code</var> の指す領域に <code>EB_DISC_INVALID</code> を
書き込み、原因を示すエラーコードを返します。

     <p><var>book</var> は、あらかじめ書籍に結び付いていなければなりません。
結びついていない場合は、<code>EB_ERR_UNBOUND_BOOK</code> を返します。
</td></tr>
</table>

<p>
<table width="100%">
<tr>
<td align="left">EB_Error_Code <b>eb_character_code</b><i> </i>(<i>EB_Book *</i><var>book</var><i>, EB_Character_Code *</i><var>character_code</var><i></i>)<i>
     </i></td>
<td align="right">機能</td>
</tr>
</table>
<table width="95%" align="center">
<tr><td>

     <p>関数 <code>eb_character_code()</code> は、<var>book</var> が書かれている文字コード
を <var>character_code</var> の指す領域に書き込みます。
書き込む文字コードの値は、<code>EB_Character_Code</code> 型
(see <a href="EB_Book-Data-Types.html#EB_Book%20Data%20Types">[CD-ROM 書籍と <code>EB_Book</code> オブジェクト] データ型の詳細</a>)
のいずれかの定数値です。

     <p>成功すると、関数は <code>EB_SUCCESS</code> を返します。
失敗すると、<var>character_code</var> の指す領域に <code>EB_CHARCODE_INVALID</code>
を書き込み、原因を示すエラーコードを返します。

     <p><var>book</var> は、あらかじめ書籍に結び付いていなければなりません。
結びついていない場合は、<code>EB_ERR_UNBOUND_BOOK</code> を返します。
</td></tr>
</table>

   </body></html>

