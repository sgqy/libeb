<html lang="en">
<head>
<title>EB Library</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="EB Library">
<meta name="generator" content="makeinfo 4.5">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home">
</head>
<body>
<div class="node">
<p>
ノード:<a name="Character%20Code">Character Code</a>,
次:<a rel="next" accesskey="n" href="Compressed-Book.html#Compressed%20Book">Compressed Book</a>,
前:<a rel="previous" accesskey="p" href="Header-Files.html#Header%20Files">Header Files</a>,
上:<a rel="up" accesskey="u" href="Features.html#Features">Features</a>
<hr><br>
</div>

<h3 class="section">文字コード</h3>

   <p>EB ライブラリでは、CD-ROM 書籍内のデータを文字列にしてアプリケーション
に渡す際の文字コードを規定しています。

   <p>EBG (海外の電子ブック) については、データが ISO 8859-1 (ラテン文字 1、
ただし制御文字を除く) で書かれているため、データのやり取りも ISO 8859-1
で行います。
ただし、外字だけは 2 バイトで表現し、0x0101 〜 0x1efe の領域を使用します。
(外字領域の下位 16 ビットは 0x01 〜 0xfe の範囲を使用します。)

   <p>EBG, EBXA-C を除いた電子ブック、および EPWING については、データが
JIS X 0208 (日本語のかな漢字) で書かれており、JIS X 0208 を 0x2121 〜
0x7e7e にマッピングし、0xa121 〜 0xfe7e を外字領域にしています (下図)。

<pre class="example">     　　　　　　　　　　　　　　　　上位８ビット
     
     　　　　　　　　　００　２１　　　　７ｅ　ａ１　　　　ｆｅ
     　　　　　　　００┌──┬─────┬──┬─────┬┐
     　　　　　　　　　│　　│　　　　　│　　│　　　　　││
     　　　　　　　２１├──┼─────┼──┼─────┼┤
     　　　　　　　　　│　　│　　　　　│　　│　　　　　││
     　　　　　　　　　│　　│ＪＩＳ　Ｘ│　　│　外字　　││
     　　　　　　　　　│　　│０２０８　│　　│　　　　　││
     　　　　　　　　　│　　│　　　　　│　　│　　　　　││
     　　　　　　　７ｅ├──┼─────┼──┼─────┼┤
     下位８ビット　　　│　　│　　　　　│　　│　　　　　││
     　　　　　　　ａ１├──┼─────┼──┼─────┼┤
     　　　　　　　　　│　　│　　　　　│　　│　　　　　││
     　　　　　　　　　│　　│　　　　　│　　│　　　　　││
     　　　　　　　　　│　　│　　　　　│　　│　　　　　││
     　　　　　　　　　│　　│　　　　　│　　│　　　　　││
     　　　　　　　ｆｅ├──┼─────┼──┼─────┼┤
     　　　　　　　　　└──┴─────┴──┴─────┴┘
     </pre>

<p>EB ライブラリでは JIS X 0208 部分を日本語 EUC (EUC-JP) にエンコード
して、アプリケーションとのやり取りも日本語 EUC で行います。
したがって、JIS X 0208 部分は 0xa1a1 〜 0xfefe にマッピングされます。

   <p>EBXA-C (中日・日中辞書の電子ブック) については、データが JIS X 0208
(日本語のかな漢字) と GB 2312 (中国語の簡体字) で書かれており、
JIS X 0208 を 0x2121 〜 0x7e7e にマッピング、
GB 2312 を 0x21a1 〜 0x7efe にマッピングし、
0xa121 〜 0xfe7e を外字領域にしています (下図)。

<pre class="example">     　　　　　　　　　　　　　　　　上位８ビット
     
     　　　　　　　　　００　２１　　　　７ｅ　ａ１　　　　ｆｅ
     　　　　　　　００┌──┬─────┬──┬─────┬┐
     　　　　　　　　　│　　│　　　　　│　　│　　　　　││
     　　　　　　　２１├──┼─────┼──┼─────┼┤
     　　　　　　　　　│　　│　　　　　│　　│　　　　　││
     　　　　　　　　　│　　│ＪＩＳ　Ｘ│　　│　外字　　││
     　　　　　　　　　│　　│０２０８　│　　│　　　　　││
     　　　　　　　　　│　　│　　　　　│　　│　　　　　││
     　　　　　　　７ｅ├──┼─────┼──┼─────┼┤
     下位８ビット　　　│　　│　　　　　│　　│　　　　　││
     　　　　　　　ａ１├──┼─────┼──┼─────┼┤
     　　　　　　　　　│　　│　　　　　│　　│　　　　　││
     　　　　　　　　　│　　│ＧＢ　　　│　　│　　　　　││
     　　　　　　　　　│　　│２３１２　│　　│　　　　　││
     　　　　　　　　　│　　│　　　　　│　　│　　　　　││
     　　　　　　　ｆｅ├──┼─────┼──┼─────┼┤
     　　　　　　　　　└──┴─────┴──┴─────┴┘
     </pre>

<p>EB ライブラリでは、アプリケーションとのやり取りに使う文字コードは、
日本語 EUC および中国語 EUC (EUC-ZH) です。
したがって、そのままでは JIS X 0208 と GB 2312 が 0xa1a1 〜 0xfefe に
マッピングされ、衝突してしまいます。
この問題をどう回避するのかは、アプリケーション側で決める必要があります
(詳しくは、see <a href="Hook-and-Character-Code.html#Hook%20and%20Character%20Code">フックと文字コードの関係</a>)。

   <p>電子ブック、EPWING ともに、外字については、アプリケーション側でどう
扱うかを決める必要があります。
外字について詳しくは see <a href="Local-Character.html#Local%20Character">外字</a>。

   </body></html>

