<html lang="en">
<head>
<title>EB Library</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="EB Library">
<meta name="generator" content="makeinfo 4.5">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home">
</head>
<body>
<div class="node">
<p>
ノード:<a name="Current%20Font%20Height">Current Font Height</a>,
次:<a rel="next" accesskey="n" href="Get-Font.html#Get%20Font">Get Font</a>,
前:<a rel="previous" accesskey="p" href="Font-Size-and-Font-Code.html#Font%20Size%20and%20Font%20Code">Font Size and Font Code</a>,
上:<a rel="up" accesskey="u" href="Local-Character.html#Local%20Character">Local Character</a>
<hr><br>
</div>

<h3 class="section">選択中の外字フォントの高さ</h3>

   <p><code>EB_Book</code> オブジェクトで選択中の副本が用意している外字フォントの
高さの中から一つ選んで、
<dfn>選択中の外字フォントの高さ (current font height)</dfn> として指定する
ことができます。
EB ライブラリで外字のフォントデータ (ビットマップデータ) を取り出すには、
外字フォントの高さをあらかじめ選択しておく必要があります。

   <p>選択するには、関数 <code>eb_set_font()</code> を使います。
以下のプログラムは、高さ 24 ピクセルのフォントを選択する場合の例です。

<pre class="example">     /* <code>book</code> が <code>EB_Book</code> のオブジェクトで、すでに書籍に結び付け
      * られ、副本を選択中だと仮定しています。*/
     if (eb_set_font(&amp;book, EB_FONT_24) != EB_SUCCESS) {
         printf("eb_set_font_() failed\n");
         return;
     }
     </pre>

   <p>このプログラムでは、高さ 24 ピクセルのフォントを選択中の副本が用意して
いるものと仮定していますが、実際には用意していない副本も珍しくありません。
もし、副本が高さ 24 ピクセルのフォントを用意していなければ、
<code>eb_set_font()</code> は <code>EB_ERR_NO_SUCH_FONT</code> を返します。

   <p>しかし、外字を選択する前に、前もってその副本が用意しているフォントを
知りたいときもあります。
これには、2 通りの方法があります。

   <p>まず 1 つ目は、選択中の副本が用意しているフォントの高さの一覧を
<code>eb_font_list()</code> で取得する方法です。
これは、副本コードの一覧を取得する <code>eb_subbook_list()</code> と使い方
が良く似ています。

<pre class="example">     EB_Font_Code font_list[EB_MAX_FONTS];
     int font_count;
     int i;
     
     if (eb_font_list(&amp;book, font_list, &amp;font_count) != EB_SUCCESS) {
         printf("eb_font_list() failed\n");
         return;
     }
     
     for (i = 0; i &lt; font_count; i++) {
         if (font_list[i] == EB_FONT_24)
             printf("this subbook has EB_FONT_24\n");
     }
     </pre>

   <p>2 つ目は、<code>eb_have_font()</code> を使うやり方です。
この関数は、特定の高さのフォントを、選択中の副本が用意しているかどうか
調べることができます。

<pre class="example">     if (eb_have_font(&amp;book, EB_FONT_24)) {
         printf("this subbook has EB_FONT_24\n");
     }
     </pre>

   <p>また、選択中の副本が半角外字、全角外字を定義しているかどうかは、それぞれ
<code>eb_have_narrow_font()</code>, <code>eb_have_wide_font()</code> を使って調べる
ことができます。

<pre class="example">     if (eb_have_narrow_font(&amp;book))
         printf("this subbook has narrow font\n");
     if (eb_have_wide_font(&amp;book))
         printf("this subbook has wide font\n");
     </pre>

   <p>なお、あらかじめ副本を選択しておかないと、外字の高さは選択できないので
注意して下さい。
<code>eb_set_subbook()</code> で選択中の副本を切り替えると、外字フォントの
高さは常に未選択の状態に戻ります。

   </body></html>

