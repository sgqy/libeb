<html lang="en">
<head>
<title>EB Library</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="EB Library">
<meta name="generator" content="makeinfo 4.5">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home">
</head>
<body>
<div class="node">
<p>
ノード:<a name="Appendix%20Alternation%20Text">Appendix Alternation Text</a>,
次:<a rel="next" accesskey="n" href="Appendix-Data-Types.html#Appendix%20Data%20Types">Appendix Data Types</a>,
前:<a rel="previous" accesskey="p" href="Appendix-Stop-Code.html#Appendix%20Stop%20Code">Appendix Stop Code</a>,
上:<a rel="up" accesskey="u" href="Appendix-Data.html#Appendix%20Data">Appendix Data</a>
<hr><br>
</div>

<h3 class="section">外字の代替文字列</h3>

   <p>CD-ROM 書籍は、定義している外字の情報としてフォントのデータしか用意して
いません。
つまり、その外字がどのような文字なのかをユーザに分かるようにするには、
アプリケーションがフォントを表示するしかありません。
しかしこれでは、テキストインターフェースを用いたアプリケーションでは、
本文中の外字の部分がまったく分かりません。
外字を多用している書籍では、本文が解読不能に近い状態になるかも知れません。

   <p>そこで EB ライブラリでは、外字の代替となる文字列を appendix 内で定義
できるようにしています。
appendix が用意されている場合に限り、アプリケーションは外字のフォント
を描画する代わりにその代替文字列を出力することにすれば、
テキストインターフェースを用いたアプリケーションでも書籍が読み易く
なります。

   <p>appendix に定義されている代替文字列を取り出す関数は、2 つあります。
半角外字用の <code>eb_narrow_alt_character_text()</code> と全角外字用の
<code>eb_wide_alt_character_text()</code> です。
どちらも、使い方は変わりません。

   <p>以下の例では、半角外字の文字番号 0xa121 に対する代替文字列を <code>buffer</code>
に格納しています。

<pre class="example">     /* <code>app</code> が <code>EB_Appendix</code> のオブジェクトで、すでに副本を
      * 選択中であると仮定しています。*/
     char buffer[EB_MAX_ALTERNATION_TEXT_LENGTH + 1];
     
     if (eb_narrow_alt_character_text(&amp;app, buffer, 0xa121)
         != EB_SUCCESS) {
         printf("eb_narrow_alt_character_text() failed\n");
         return;
     }
     </pre>

<p>外字は個々の副本に対して定義されているので、代替文字列を取り出すには、
あらかじめ副本を選択しておく必要があります。
外字のフォントを取り出す際は、これに加えて外字の「高さ」も選択しておく
必要がありましたが、代替文字列には高さの概念がないので必要ありません。

   <p>代替文字列は最長で <code>EB_MAX_ALTERNATION_TEXT_LENGTH</code> バイト
(= 31 バイト) です。
ただし、この長さにはナル文字の分は含んでいないので、<code>buffer</code> は
もう 1 バイト分余裕を持たせています。

   </body></html>

