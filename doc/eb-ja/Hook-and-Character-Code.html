<html lang="en">
<head>
<title>EB Library</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="EB Library">
<meta name="generator" content="makeinfo 4.5">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home">
</head>
<body>
<div class="node">
<p>
ノード:<a name="Hook%20and%20Character%20Code">Hook and Character Code</a>,
次:<a rel="next" accesskey="n" href="Copyright-Notice.html#Copyright%20Notice">Copyright Notice</a>,
前:<a rel="previous" accesskey="p" href="Hook.html#Hook">Hook</a>,
上:<a rel="up" accesskey="u" href="Text-Data.html#Text%20Data">Text Data</a>
<hr><br>
</div>

<h3 class="section">フックと文字コードの関係</h3>

   <p>前節では、エスケープシーケンスに対するフックを例にとりましたが、この他
にも、EB ライブラリには文字に対するフックが用意されています。

     <dl>
<dt><code>EB_HOOK_ISO8859_1</code>
     <dd>ISO 8859-1 (ラテン文字 1) 文字へのフック。ただし制御文字を除きます。
引数として、ISO 8859-1 の文字番号がフック関数に渡されます。

     <br><dt><code>EB_HOOK_NARROW_JISX0208</code>
     <dd>半角の JIS X 0208 (日本語のかな漢字) 文字へのフック。
引数として、日本語 EUC で表現した場合の文字番号が、フック関数に渡されます。

     <br><dt><code>EB_HOOK_WIDE_JISX0208</code>
     <dd>全角の JIS X 0208 (日本語のかな漢字) 文字へのフック。
引数として、日本語 EUC で表現した場合の文字番号が、フック関数に渡されます。

     <br><dt><code>EB_HOOK_GB2312</code>
     <dd>GB 2312 (中国語の簡体字) 文字へのフック。
引数として、中国語 EUC で表現した場合の文字番号が、フック関数に渡されます。

     <br><dt><code>EB_HOOK_NARROW_FONT</code>
     <dd>半角の外字へのフック。
引数として、外字の文字番号が、フック関数に渡されます。

     <br><dt><code>EB_HOOK_WIDE_FONT</code>
     <dd>半角の外字へのフック。
引数として、外字の文字番号が、フック関数に渡されます。
</dl>

<p>いずれも、その文字がテキストデータ中に現れる度に、フック関数が呼び出され
ます。

   <p>上の記述を見ても分かるように、フック関数に渡される文字番号は、書籍の文字
コードに応じて、ISO 8859-1, 日本語 EUC、中国語 EUC のいずれかの文字コード
で表現されたものになります。

   <p>フック関数を登録しなければ、その文字番号がテキストデータとしてそのまま
書き込まれます。

   <p>もし、アプリケーションプログラムが、EB ライブラリの内部コードとは異なる
文字コードを使用したい場合は、これらのフックのフック関数を登録して、
コード変換処理をするのも手です。
ただし、一文字毎にフック関数が呼び出されるので、相応の負荷がかかります。

   <p>また、EBXA-C を扱うには、特別な処理が必要です。
EBXA-C では、文字コードとして GB 2312 と JIS X 0208 が使われますが
(see <a href="Character-Code.html#Character%20Code">文字コード</a>)、EB ライブラリによる標準の処理
では、どちらも 0xa1a1 〜 0xfefe にマッピングされて衝突するため、最低
でもどちらか一方をフックして文字の表現方法を変えないと、正しく出力
できません。

   </body></html>

