<html lang="en">
<head>
<title>EB Library</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="EB Library">
<meta name="generator" content="makeinfo 4.5">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home">
</head>
<body>
<div class="node">
<p>
ノード:<a name="Subbook%20Functions">Subbook Functions</a>,
前:<a rel="previous" accesskey="p" href="Subbook-Data-Types.html#Subbook%20Data%20Types">Subbook Data Types</a>,
上:<a rel="up" accesskey="u" href="Subbook.html#Subbook">Subbook</a>
<hr><br>
</div>

<h3 class="section">関数の詳細</h3>

   <p>この節で説明している関数を使うには、次のようにヘッダファイルを読み込んで
下さい。

<pre class="example">     #include &lt;eb/eb.h&gt;
     </pre>

<p>
<table width="100%">
<tr>
<td align="left">EB_Error_Code <b>eb_load_all_subbooks</b><i> </i>(<i>EB_Book *</i><var>book</var><i></i>)<i>
     </i></td>
<td align="right">機能</td>
</tr>
</table>
<table width="95%" align="center">
<tr><td>

     <p>関数 <code>eb_load_all_subbooks()</code> は、<var>book</var> 内のすべての副本を
初期化します。
通常、副本の初期化は、その副本が初めて選択されたときに自動的に行われますが、
この関数は初期化を前倒しで行います。
初期化の対象となるのは、この関数を呼び出した時点でまだ初期化していない
すべての副本です。
この関数は、スタンドアロンで動作するサーバアプリケーションなどで有効です。
クライアントからの接続を受ける前にこの関数を呼ぶことで、副本の初期化の
ためにクライアントを待たせなくて済みます。

     <p>初期化の対象となったすべての副本の初期化に成功すれば、関数は
<code>EB_SUCCESS</code> を返します。
一冊でも初期化に失敗した場合は、残りの副本の初期化を諦め、原因を示す
エラーコードを返します。

     <p><var>book</var> は、あらかじめ書籍に結び付けられていなくてはなりません。
結びついていない場合は、<code>EB_ERR_UNBOUND_BOOK</code> を返します。

     <p>この関数を呼び出すと、<var>book</var> は、副本を選択していない状態になります。
</td></tr>
</table>

<p>
<table width="100%">
<tr>
<td align="left">EB_Error_Code <b>eb_subbook_list</b><i> </i>(<i>EB_Book *</i><var>book</var><i>, EB_Subbook_Code *</i><var>subbook_list</var><i>, int *</i><var>subbook_count</var><i></i>)<i>
     </i></td>
<td align="right">機能</td>
</tr>
</table>
<table width="95%" align="center">
<tr><td>

     <p>関数 <code>eb_subbook_list()</code> は、<var>book</var> 内のすべて副本の副本コードを
<code>EB_Subbook_Code</code> 型の配列にして、<var>subbook_list</var> の指す領域に
書き込みます。
配列は、最大で <code>EB_MAX_SUBBOOKS</code> 個の要素を持ちます。
加えて、書籍が収録している副本の個数を <var>subbook_count</var> の指す領域に
書き込みます。

     <p>成功すると、関数は <code>EB_SUCCESS</code> を返します。
失敗すると、<var>subbook_count</var> の指す領域に 0 を書き込み、原因を示す
エラーコードを返します。

     <p><var>book</var> は、あらかじめ書籍に結び付けられていなくてはなりません。
結びついていない場合は、<code>EB_ERR_UNBOUND_BOOK</code> を返します。
</td></tr>
</table>

<p>
<table width="100%">
<tr>
<td align="left">EB_Error_Code <b>eb_subbook</b><i> </i>(<i>EB_Book *</i><var>book</var><i>, EB_Subbook_Code *</i><var>subbook_code</var><i></i>)<i>
     </i></td>
<td align="right">機能</td>
</tr>
</table>
<table width="95%" align="center">
<tr><td>

     <p>関数 <code>eb_subbook()</code> は、<var>book</var> が選択中の副本の副本コードを
<var>subbook_code</var> の指す領域に書き込みます。

     <p>成功すると、関数は <code>EB_SUCCESS</code> を返します。
失敗すると、<var>subbook_code</var> の指す領域に <code>EB_SUBBOOK_INVALID</code>
を書き込み、原因を示すエラーコードを返します。

     <p>あらかじめ、<var>book</var> はいずれかの副本を選択していなくてはなりません。
選択していない場合は、<code>EB_ERR_NO_CUR_SUB</code> を返します。
</td></tr>
</table>

<p>
<table width="100%">
<tr>
<td align="left">EB_Error_Code <b>eb_subbook_title</b><i> </i>(<i>EB_Book *</i><var>book</var><i>, char *</i><var>title</var><i></i>)<i>
     </i></td>
<td align="right">機能</td>
</tr>
</table>
<table width="95%" align="center">
<tr><td>

     <p>関数 <code>eb_subbook_title()</code> は、<var>book</var> が選択中の副本の題名を
<var>title</var> の指す領域に文字列として書き込みます。
題名の文字列の長さは、最長で <code>EB_MAX_TITLE_LENGTH</code> バイトです。
この長さは、末尾のナル文字を含みません。

     <p>書籍の文字コード
(see <a href="EB_Book-Data-Types.html#EB_Book%20Data%20Types">[CD-ROM 書籍と <code>EB_Book</code> オブジェクト] データ型の詳細</a>)
が <code>EB_CHARCODE_ISO8859_1</code> なら、題名を表す文字列は ISO 8859-1 に
なり、それ以外の文字コードなら日本語 EUC になります。

     <p>成功すると、関数は <code>EB_SUCCESS</code> を返します。
失敗すると、<var>title</var> の指す領域に空文字列を書き込み、原因を示す
エラーコードを返します。

     <p>あらかじめ、<var>book</var> 内のいずれかの副本が選択されていなくてはなりません。
選択していない場合は、<code>EB_ERR_NO_CUR_SUB</code> を返します。
</td></tr>
</table>

<p>
<table width="100%">
<tr>
<td align="left">EB_Error_Code <b>eb_subbook_title2</b><i> </i>(<i>EB_Book *</i><var>book</var><i>, EB_Subbook_Code </i><var>subbook_code</var><i>, char *</i><var>title</var><i></i>)<i>
     </i></td>
<td align="right">機能</td>
</tr>
</table>
<table width="95%" align="center">
<tr><td>

     <p><code>eb_subbook_title()</code> と似ていますが、選択中の副本ではなく、引数
<var>subbook_code</var> で指定された副本の題名を書き込む点が異なります。

     <p><var>book</var> は副本を選択していなくても構いませんが、あらかじめ
書籍に結び付けられていなければなりません。
結びついていない場合は、<code>EB_ERR_UNBOUND_BOOK</code> を返します。
</td></tr>
</table>

<p>
<table width="100%">
<tr>
<td align="left">EB_Error_Code <b>eb_subbook_directory</b><i> </i>(<i>EB_Book *</i><var>book</var><i>, char *</i><var>directory</var><i></i>)<i>
     </i></td>
<td align="right">機能</td>
</tr>
</table>
<table width="95%" align="center">
<tr><td>

     <p>関数 <code>eb_subbook_directory()</code> は、<var>book</var> 内で現在選択中の副本
のデータファイルを収めたディレクトリ名を、<var>directory</var> の指す領域に
書き込みます。

     <p>ディレクトリ名の文字列の長さは、最長で <code>EB_MAX_DIRECTORY_NAME_LENGTH</code>
バイトです。
この長さに、末尾のナル文字は含みません。
ディレクトリ名は ASCII の数字、英小文字、アンダースコアで構成されます。

     <p>成功すると、関数は <code>EB_SUCCESS</code> を返します。
失敗すると、<var>directory</var> の指す領域に空文字列を書き込み、原因に
を示すエラーコードを返します。

     <p>あらかじめ、<var>book</var> 内のいずれかの副本が選択されていなくてはなりません。
選択していない場合は、<code>EB_ERR_NO_CUR_SUB</code> を返します。
</td></tr>
</table>

<p>
<table width="100%">
<tr>
<td align="left">EB_Error_Code <b>eb_subbook_directory2</b><i> </i>(<i>EB_Book *</i><var>book</var><i>, EB_Subbook_Code </i><var>subbook_code</var><i>, char *</i><var>directory</var><i></i>)<i>
     </i></td>
<td align="right">機能</td>
</tr>
</table>
<table width="95%" align="center">
<tr><td>

     <p><code>eb_subbook_directory()</code> と似ていますが、選択中の副本ではなく、引数
<var>subbook_code</var> で指定された副本のディレクトリ名を書き込む点が
異なります。

     <p><var>book</var> は副本を選択していなくても構いませんが、あらかじめ
書籍に結び付けられていなければなりません。
結びついていない場合は、<code>EB_ERR_UNBOUND_BOOK</code> を返します。
</td></tr>
</table>

<p>
<table width="100%">
<tr>
<td align="left">EB_Error_Code <b>eb_set_subbook</b><i> </i>(<i>EB_Book *</i><var>book</var><i>, EB_Subbook_Code </i><var>code</var><i></i>)<i>
     </i></td>
<td align="right">機能</td>
</tr>
</table>
<table width="95%" align="center">
<tr><td>

     <p>関数 <code>eb_set_subbook()</code> は、<var>book</var> の副本 <var>code</var> を選択
します。
すでに副本を選択していた場合は、いったん未選択の状態にしてから副本
<var>subbook_code</var> を選択します。

     <p>成功すると、関数は <code>EB_SUCCESS</code> を返します。
このとき、外字は未選択の状態となり、検索、テキストデータの読み込み、
バイナリデータの読み込みについての状態記録は、すべてリセットされます。
失敗すると、副本を未選択の状態にして、原因を示すエラーコードを返します。

     <p>あらかじめ、<var>book</var> は書籍に結び付けられていなければなりません。
結びついていない場合は、<code>EB_ERR_UNBOUND_BOOK</code> を返します。
</td></tr>
</table>

<p>
<table width="100%">
<tr>
<td align="left">void <b>eb_unset_subbook</b><i> </i>(<i>EB_Book *</i><var>book</var><i></i>)<i>
     </i></td>
<td align="right">機能</td>
</tr>
</table>
<table width="95%" align="center">
<tr><td>

     <p>関数 <code>eb_unset_subbook()</code> は、<var>book</var> が選択している副本を未選択
の状態にします。
<var>book</var> が書籍に結び付いていないか、副本が選択されていない場合は、何
もしません。
</td></tr>
</table>

   </body></html>

