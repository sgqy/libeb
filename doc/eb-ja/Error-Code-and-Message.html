<html lang="en">
<head>
<title>EB Library</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="EB Library">
<meta name="generator" content="makeinfo 4.5">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home">
</head>
<body>
<div class="node">
<p>
ノード:<a name="Error%20Code%20and%20Message">Error Code and Message</a>,
次:<a rel="next" accesskey="n" href="Tolerance-to-Error.html#Tolerance%20to%20Error">Tolerance to Error</a>,
前:<a rel="previous" accesskey="p" href="Error-Handling.html#Error%20Handling">Error Handling</a>,
上:<a rel="up" accesskey="u" href="Error-Handling.html#Error%20Handling">Error Handling</a>
<hr><br>
</div>

<h3 class="section">エラーコードとエラーメッセージ</h3>

   <p>EB ライブラリの関数の多くは、戻り値として <code>EB_Error_Code</code>
型の値を返します。
処理が成功したときに返す値は <code>EB_SUCCESS</code> ですが、失敗したときは
エラーの原因に応じて様々な値を返します。
このため、EB ライブラリでは次のような <code>EB_SUCCESS</code> との比較処理
がよく行われます。

<pre class="example">     EB_Error_Code error_code;
     
     error_code = eb_bind(&amp;book, "/mnt/cdrom");
     if (error_code != EB_SUCCESS) {
         printf("eb_bind() failed\n");
         return;
     }
     </pre>

   <p>エラーコードの値は、関数 <code>eb_error_message()</code> によって
エラーメッセージに変換することもできます。
こうすることで、エラーの原因をアプリケーションプログラムのユーザに
もう少し分かりやすく伝えることができます。

<pre class="example">     error_code = eb_bind(&amp;book, "/mnt/cdrom");
     if (error_code != EB_SUCCESS) {
         printf("eb_bind() failed, %s\n",
             eb_error_message(error_code));
         return;
     }
     </pre>

   <p><code>error_code</code> が <code>EB_ERR_TOO_LONG_FILENAME</code> にセットされて
いれば、次のようなエラーメッセージが出力されます。

<pre class="example">     too long filename
     </pre>

<p>あるいは、次のように日本語のメッセージかも知れません。

<pre class="example">     ファイル名が長すぎます
     </pre>

<p>メッセージの国際化機能 (NLS) を無効にして EB ライブラリをコンパイル
した場合は、常に英語のメッセージが返ります。
有効にした場合は、ロケールの設定によってどちらの言語のメッセージが
返るかが決まります。

   <p>本書ではプログラムを簡潔にするために、エラー処理は最低限しか行って
いません。
けれども一般のアプリケーションプログラムでは、関数の呼び出しが成功
したかどうかを常にチェックし、処理が失敗した際はエラーメッセージを出力
して、ユーザにエラーの原因を伝えるのが望ましいといえます。

   </body></html>

